// 전체 번역 데이터
const translations = {
    ko: {
        // 공통 네비게이션
        company: '회사',
        publishing: '게임',
        career: '경력',
        news: '소식',

        // 푸터
        companyName: '상호명: IntelliOneStudio',
        ceo: '대표자: (대표자명)',
        businessNumber: '사업자번호: 359-02-03179',
        email: 'EMAIL: intellioneofficial@naver.com',
        privacyPolicy: '개인정보처리방침',
        copyright: 'Copyright © 2025 IntelliOneStudio All rights reserved.',

        // 페이지별 번역
        pages: {
            index: {
                heroTitle: '세상을 즐겁게 하다'
            },
            games: {
                heroTitle1: "인텔리원스튜디오가 개발한",
                heroTitle2: "다양한 게임을 만나보세요",
                gameTitle1: "Ghost Lights Puzzle",
                gameTitle2: "Exit Queue",
                gameTitle3: "외워라 창고",
                gameTitle4: "농부의 꿈"
            },
            about: {
                storyHeading: '우리의 이야기',
                storyContent: '2024년에 설립된 IntelliOne Studio는 세상을 더욱 즐겁게 만드는 하이퍼캐주얼 게임 개발에 전념하고 있습니다. 혁신과 AI 기술을 바탕으로, 우리는 세계적 유저들에게 매력적인 경험을 제공합니다.',
                timeline2023: '2024 - 설립',
                timeline2023Content: 'IntelliOne Studio는 "세상을 더욱 즐겁게"라는 비전으로 설립되었습니다. 대표작으로는 퍼즐 게임 "외워라! 창고"와 "농부의 꿈"이 있으며, 두 게임 모두 iOS 및 Android 플랫폼에서 무료로 출시되었습니다.',
                timeline2024: '2025 - 글로벌 성장',
                timeline2024Content: '새로운 하이퍼캐주얼 게임 출시를 통해 글로벌 시장에서 더 큰 사랑을 받을 것입니다.'
            },
            career: {
                careerTitle: '우리의 팀',
                careerSubtitle: '우리는 창의적이고 탁월한 성과를 지향하며, 모바일 산업에서 새로운 기준을 제시하는 데 전념하고 있습니다.',
                gamingTitle: '게임 개발',
                appsTitle: '앱 제작',
                growthTitle: '성장',
                hiringTitle: '채용 여정',
                hiringSubtitle: '효율적이고 투명한 절차로 팀에 빠르게 적응하고 성공적으로 합류할 수 있도록 설계되었습니다.',
                step1Title: '적합성 탐색',
                step1Content: '채용팀과 대화를 통해 역할과 기술, 그리고 강점을 탐구하세요.',
                step2Title: '전문성 검증',
                step2Content: '케이스 스터디와 기술 평가를 통해 능력을 증명하고 피드백을 받아보세요.',
                step3Title: '협력적 대화',
                step3Content: '팀과 심도 있는 논의를 통해 목표와 열정을 공유하세요.',
                step4Title: '문화적 조화 확인',
                step4Content: '리더십 인터뷰를 통해 회사의 가치와 적합성을 확인합니다.'
            },
            gaming: {
                heroTitle: '게임 팀을 만나보세요',
                heroSubtitle: '우리 팀은 글로벌 스튜디오와 협력하여 하이브리드 캐주얼 및 미드코어 게임을 제작하며, 뛰어난 플레이어 경험을 제공합니다.',
                whyJoinTitle: '게임 팀의 특별함',
                reason1: '세계적 전문가들과 협력해 독창적인 게임 경험을 만들어보세요.',
                reason2: '전 세계 플레이어들에게 사랑받는 게임 제작의 기회를 잡으세요.'
            },
            apps: {
                heroTitle: '앱 팀을 탐험하세요',
                heroSubtitle: '기술로 일상을 풍요롭게 하며, 수백만 명의 사용자에게 혁신적인 애플리케이션을 제공합니다.',
                whyJoinTitle: '앱 팀의 특별함',
                reason1: '게임을 넘어 실질적인 가치를 제공하는 앱을 설계합니다.',
                reason2: '독창적이고 혁신적인 앱을 통해 글로벌 시장에 도전하세요.'
            },
            growth: {
                heroTitle: '성장 팀을 탐험하세요',
                heroSubtitle: '우리 성장 팀은 전략과 데이터 기반 솔루션으로 IntelliOne Studio의 제품을 글로벌 시장에서 확장합니다.',
                whyJoinTitle: '성장 팀의 특별함',
                reason1: '창의성과 실행력을 바탕으로 성공적인 캠페인을 설계하세요.',
                reason2: '빠르게 변화하는 시장에서 선두를 유지하는 전략을 함께 만들어보세요.'
            }
        }
    },
    en: {
        // 공통 네비게이션
        company: 'Company',
        publishing: 'Game',
        career: 'Career',
        news: 'News',

        // 푸터
        companyName: 'Company: IntelliOneStudio',
        businessNumber: 'Business No.: 359-02-03179',
        email: 'EMAIL: intellioneofficial@naver.com',
        privacyPolicy: 'Privacy Policy',
        copyright: 'Copyright © 2025 IntelliOneStudio All rights reserved.',

        // 페이지별 번역
        pages: {
            index: {
                heroTitle: 'Make the World Fun'
            },
            games: {
                heroTitle1: 'Games Developed by IntelliOne Studio',
                heroTitle2: 'Discover Our Various Games',
                gameTitle1: 'Ghost Lights Puzzle',
                gameTitle2: 'Exit queue',
                gameTitle3: 'Memory Warehouse',
                gameTitle4: 'Farmers Dream'
            },
            about: {
                storyHeading: 'Our Story',
                storyContent: 'Founded in 2024, IntelliOne Studio creates hyper-casual games that captivate players worldwide. We combine innovation and AI to deliver exceptional experiences.',
                timeline2023: '2024 - Founding',
                timeline2023Content: 'Founded with the vision of "Making the World More Enjoyable," IntelliOne Studio has released games like "Memory Warehouse" and "Farmers Dream" on iOS and Android platforms.',
                timeline2024: '2025 - Global Growth',
                timeline2024Content: 'Launching new games to expand our impact on the global market.'
            },
            career: {
                careerTitle: 'Our Team',
                careerSubtitle: 'We pursue creativity and excellence, setting new standards in the mobile industry.',
                gamingTitle: 'Gaming',
                appsTitle: 'Apps',
                growthTitle: 'Growth',
                hiringTitle: 'Our Hiring Journey',
                hiringSubtitle: 'A transparent and efficient process designed to ensure a seamless transition into our team.',
                step1Title: 'Explore Your Fit',
                step1Content: 'Engage with our recruitment team to discuss your skills and potential role.',
                step2Title: 'Showcase Your Skills',
                step2Content: 'Participate in evaluations and receive actionable feedback.',
                step3Title: 'Collaborate and Connect',
                step3Content: 'Dive into meaningful discussions with our team about your goals and aspirations.',
                step4Title: 'Align and Grow',
                step4Content: 'Conclude with leadership interviews to ensure alignment with our culture.'
            },
            gaming: {
                heroTitle: 'Meet Our Gaming Team',
                heroSubtitle: 'Our team collaborates with global studios to create hybrid-casual and mid-core games that stand out worldwide.',
                whyJoinTitle: 'What Sets This Team Apart?',
                reason1: 'Join experts in crafting extraordinary gaming experiences.',
                reason2: 'Build games that captivate players across the globe.'
            },
            apps: {
                heroTitle: 'Discover the Apps Team',
                heroSubtitle: 'Creating innovative solutions that enhance everyday life for millions of users.',
                whyJoinTitle: 'Why Join Our Apps Team?',
                reason1: 'Design apps that solve real-world problems and bring joy to users.',
                reason2: 'Take part in creating impactful apps that define the future.'
            },
            growth: {
                heroTitle: 'Discover the Growth Team',
                heroSubtitle: 'Scaling IntelliOne Studio products with strategic, data-driven solutions.',
                whyJoinTitle: 'Why Join Our Growth Team?',
                reason1: 'Lead innovative campaigns in user acquisition and market growth.',
                reason2: 'Collaborate to develop strategies that adapt to an ever-changing industry.'
            }
        }
    }
};



// 헤더 HTML
const headerHTML = `
<nav class="navbar">
    <a href="index.html" class="logo">IntelliOneStudio</a>
    <div class="nav-links">
        <a href="about.html">회사</a>
        <a href="games.html">게임</a>
        <a href="career.html">경력</a>
        <a href="#">소식</a>
    </div>
    <div class="nav-right">
        <a href="https://www.instagram.com/intellionestudio" target="_blank" class="social-link">
            <img src="Instagram.png" alt="Instagram" style="width: 24px; height: 24px;">
        </a>
        <div class="language-selector">
            <button class="language-btn">
                <img src="World.png" alt="Language" style="width: 24px; height: 24px;">
            </button>
            <div class="language-dropdown">
                <a href="#" class="language-option" data-lang="ko">한국어</a>
                <a href="#" class="language-option" data-lang="en">English</a>
            </div>
        </div>
        <button class="menu-toggle" style="width: 24px; height: 24px;"><img src="List.png" alt="Menu" style="width: 18px; height: 18px;"></button>
    </div>
</nav>
`;

// 푸터 HTML
const footerHTML = `
<footer class="footer">
    <div class="footer-content">
        <div class="company-info">
            <p data-lang-key="companyName">상호명: IntelliOneStudio</p>
            <p data-lang-key="businessNumber">사업자번호: (사업자번호)</p>
            <p data-lang-key="email">EMAIL: (이메일)</p>
            <div class="legal-links">
                <a href="/privacy" data-lang-key="privacyPolicy">개인정보처리방침</a>
            </div>
            <p data-lang-key="copyright">Copyright © 2024 IntelliOneStudio All rights reserved.</p>
        </div>
        <div class="social-links" style="align-self: flex-start;">
            <a href="https://www.instagram.com/intellionestudio" target="_blank" class="social-link">
                <img src="Instagram.png" alt="Instagram" style="width: 24px; height: 24px;">
            </a>
        </div>
    </div>
</footer>
`;

// 언어 변경 함수
function changeLanguage(lang) {
    // 1. 언어 설정 저장 (리다이렉션 전에 저장)
    localStorage.setItem('selectedLanguage', lang);

    // 2. 네비게이션 번역
    const navLinks = document.querySelectorAll('.nav-links a');
    navLinks[0].textContent = translations[lang].company;
    navLinks[1].textContent = translations[lang].publishing;
    navLinks[2].textContent = translations[lang].career;
    navLinks[3].textContent = translations[lang].news;

    // 3. 푸터 번역
    document.querySelectorAll('[data-lang-key]').forEach(element => {
        const key = element.getAttribute('data-lang-key');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });

    
    // 4. 개인정보처리방침 페이지 확인 및 리다이렉트 처리
    const currentPath = window.location.pathname;
    if (currentPath.endsWith('about.html')) {
        document.querySelector('.our-story h2').textContent = translations[lang].pages.about.storyHeading;
        document.querySelector('.our-story p').textContent = translations[lang].pages.about.storyContent;
        const timelineItems = document.querySelectorAll('.timeline-item');
        timelineItems[0].querySelector('h3').textContent = translations[lang].pages.about.timeline2023;
        timelineItems[0].querySelector('p').textContent = translations[lang].pages.about.timeline2023Content;
        timelineItems[1].querySelector('h3').textContent = translations[lang].pages.about.timeline2024;
        timelineItems[1].querySelector('p').textContent = translations[lang].pages.about.timeline2024Content;
    }

    // 5. Career 페이지 번역
    if (currentPath.endsWith('career.html')) {
        document.querySelector('.career-hero h1').textContent = translations[lang].pages.career.careerTitle;
        document.querySelector('.career-hero p').textContent = translations[lang].pages.career.careerSubtitle;
        const teamCards = document.querySelectorAll('.team-card h2');
        teamCards[0].textContent = translations[lang].pages.career.gamingTitle;
        teamCards[1].textContent = translations[lang].pages.career.appsTitle;
        teamCards[2].textContent = translations[lang].pages.career.growthTitle;
        document.querySelector('.hiring-process h2').textContent = translations[lang].pages.career.hiringTitle;
        document.querySelector('.hiring-process p').textContent = translations[lang].pages.career.hiringSubtitle;
        const hiringSteps = document.querySelectorAll('.hiring-steps .step');
        hiringSteps[0].querySelector('h3').textContent = translations[lang].pages.career.step1Title;
        hiringSteps[0].querySelector('p').textContent = translations[lang].pages.career.step1Content;
        hiringSteps[1].querySelector('h3').textContent = translations[lang].pages.career.step2Title;
        hiringSteps[1].querySelector('p').textContent = translations[lang].pages.career.step2Content;
        hiringSteps[2].querySelector('h3').textContent = translations[lang].pages.career.step3Title;
        hiringSteps[2].querySelector('p').textContent = translations[lang].pages.career.step3Content;
        hiringSteps[3].querySelector('h3').textContent = translations[lang].pages.career.step4Title;
        hiringSteps[3].querySelector('p').textContent = translations[lang].pages.career.step4Content;
        hiringSteps[3].querySelector('.step-offer').textContent = translations[lang].pages.career.offer;
    }
    
    if (currentPath.endsWith('gaming.html')) {
        document.querySelector('.gaming-hero h1').textContent = translations[lang].pages.gaming.heroTitle;
        document.querySelector('.gaming-hero p').textContent = translations[lang].pages.gaming.heroSubtitle;
        document.querySelector('.why-join h2').textContent = translations[lang].pages.gaming.whyJoinTitle;

        const reasons = document.querySelectorAll('.join-reasons .reason p');
        reasons[0].textContent = translations[lang].pages.gaming.reason1;
        reasons[1].textContent = translations[lang].pages.gaming.reason2;
    }

    if (currentPath.endsWith('apps.html')) {
        document.querySelector('.gaming-hero h1').textContent = translations[lang].pages.apps.heroTitle;
        document.querySelector('.gaming-hero p').textContent = translations[lang].pages.apps.heroSubtitle;
        document.querySelector('.why-join h2').textContent = translations[lang].pages.apps.whyJoinTitle;
    
        const reasons = document.querySelectorAll('.join-reasons .reason p');
        reasons[0].textContent = translations[lang].pages.apps.reason1;
        reasons[1].textContent = translations[lang].pages.apps.reason2;
    }
    
    if (currentPath.endsWith('growth.html')) {
        document.querySelector('.gaming-hero h1').textContent = translations[lang].pages.growth.heroTitle;
        document.querySelector('.gaming-hero p').textContent = translations[lang].pages.growth.heroSubtitle;
        document.querySelector('.why-join h2').textContent = translations[lang].pages.growth.whyJoinTitle;
    
        const reasons = document.querySelectorAll('.join-reasons .reason p');
        reasons[0].textContent = translations[lang].pages.growth.reason1;
        reasons[1].textContent = translations[lang].pages.growth.reason2;
    }
    


    const baseURL = window.location.origin;

    if (currentPath.endsWith('privacy_policy_K.html') && lang === 'en') {
        window.location.href = `${baseURL}/privacy_policy_E.html`;
        return;
    } else if (currentPath.endsWith('privacy_policy_E.html') && lang === 'ko') {
        window.location.href = `${baseURL}/privacy_policy_K.html`;
        return;
    }

    // 5. 개인정보처리방침 링크 업데이트
    const privacyLink = document.querySelector('.legal-links a[data-lang-key="privacyPolicy"]');
    if (privacyLink) {
        privacyLink.setAttribute(
            'href',
            lang === 'ko' ? `${baseURL}/privacy_policy_K.html` : `${baseURL}/privacy_policy_E.html`
        );
    }

    // 6. 페이지별 번역
    const currentPageKey = currentPath.split('/').pop().replace('.html', '') || 'index';
    if (translations[lang].pages[currentPageKey]) {
        const pageTranslations = translations[lang].pages[currentPageKey];
        if (currentPageKey === 'index') {
            const heroTitle = document.querySelector('.hero h1');
            if (heroTitle) {
                heroTitle.textContent = pageTranslations.heroTitle;
            }
        } else if (currentPageKey === 'games') {
            const heroTitles = document.querySelectorAll('.games-hero h1');
            if (heroTitles.length >= 2) {
                heroTitles[0].textContent = pageTranslations.heroTitle1;
                heroTitles[1].textContent = pageTranslations.heroTitle2;
            }
            const gameTitles = document.querySelectorAll('.game-title');
            if (gameTitles.length >= 4) {
                gameTitles[0].textContent = pageTranslations.gameTitle1;
                gameTitles[1].textContent = pageTranslations.gameTitle2;
                gameTitles[2].textContent = pageTranslations.gameTitle3;
                gameTitles[3].textContent = pageTranslations.gameTitle4;
            }
        }
    }
}


// 언어 선택 이벤트 초기화 함수
function initLanguageSwitcher() {
    document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', (e) => {
            e.preventDefault();
            const lang = e.target.getAttribute('data-lang');
            changeLanguage(lang);
        });
    });
}

// DOM 로드 시 실행
document.addEventListener('DOMContentLoaded', function () {
    // 1. 헤더 추가
    const headerContainer = document.createElement('header');
    headerContainer.innerHTML = headerHTML;
    document.body.insertAdjacentElement('afterbegin', headerContainer);

    // 2. 푸터 추가
    document.body.insertAdjacentHTML('beforeend', footerHTML);

    // 3. 언어 선택 초기화
    initLanguageSwitcher();

    // 4. 메뉴 토글 초기화
    const menuToggle = document.querySelector('.menu-toggle');
    const navLinks = document.querySelector('.nav-links');

    menuToggle.addEventListener('click', function () {
        navLinks.classList.toggle('active');
        const menuIcon = menuToggle.querySelector('img');
menuIcon.src = navLinks.classList.contains('active') ? 'XIcon.png' : 'List.png';
    });

    document.addEventListener('click', function (event) {
        if (!event.target.closest('.nav-links') && !event.target.closest('.menu-toggle')) {
            navLinks.classList.remove('active');
            const menuIcon = menuToggle.querySelector('img');
menuIcon.src = 'List.png';
        }
    });

    window.addEventListener('resize', function () {
        if (window.innerWidth > 768) {
            navLinks.classList.remove('active');
            menuToggle.style.display = 'none';
        } else {
            menuToggle.style.display = 'flex';
        }
    });

    menuToggle.style.display = window.innerWidth > 768 ? 'none' : 'flex';

    document.querySelectorAll('.nav-links a').forEach(link => {
        link.addEventListener('click', () => {
            navLinks.classList.remove('active');
            menuToggle.innerHTML = '☰';
        });
    });

    // 5. 저장된 언어 설정 적용
    const savedLanguage = localStorage.getItem('selectedLanguage') || 'ko';
    changeLanguage(savedLanguage);
});
